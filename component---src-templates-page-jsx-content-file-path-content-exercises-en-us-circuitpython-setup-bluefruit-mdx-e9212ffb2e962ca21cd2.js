"use strict";(self.webpackChunk_morgan_stanley_makerspace=self.webpackChunk_morgan_stanley_makerspace||[]).push([[5198],{9555:function(e,a,t){t.r(a),t.d(a,{Head:function(){return h},default:function(){return p}});var n=t(8453),r=t(6540);function l(e){const a=Object.assign({h2:"h2",a:"a",span:"span",p:"p",h3:"h3",em:"em",ul:"ul",li:"li"},(0,n.RP)(),e.components);return r.createElement(r.Fragment,null,r.createElement(a.h2,{id:"start-here",style:{position:"relative"}},r.createElement(a.a,{href:"#start-here","aria-label":"start here permalink",className:"anchor before"},r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Start Here"),"\n",r.createElement(a.p,null,"A guide to setting up the Adafruit Circuit Playground Bluefruit for our curriculum."),"\n",r.createElement(a.h3,{id:"what-is-the-circuit-playground-bluefruit",style:{position:"relative"}},r.createElement(a.a,{href:"#what-is-the-circuit-playground-bluefruit","aria-label":"what is the circuit playground bluefruit permalink",className:"anchor before"},r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"What is the Circuit Playground BlueFruit?"),"\n",r.createElement(a.p,null,"The Circuit Playgroud Bluefruit is very similar to the Circuit Playgroud Express, except it has Bluetooth Low Energy support instead of infrared (IR)!"),"\n",r.createElement(a.p,null,"Adafruit also provides a free app on ",r.createElement(a.a,{href:"https://apps.apple.com/us/app/bluefruit-connect/id830125974"},"iOS")," and ",r.createElement(a.a,{href:"https://play.google.com/store/apps/details?id=com.adafruit.bluefruit.le.connect"},"Android")," to interface with the device over Bluetooth."),"\n",r.createElement(a.h3,{id:"checking-the-bootloader",style:{position:"relative"}},r.createElement(a.a,{href:"#checking-the-bootloader","aria-label":"checking the bootloader permalink",className:"anchor before"},r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Checking the Bootloader"),"\n",r.createElement(a.p,null,r.createElement(a.a,{href:"https://circuitpython.org/"},"CircuitPython.org")," provides .uf2 files which make it easy to install CircuitPython on the device. However,\nthe Bluefruit devices may come with a much older bootloader. For example, if you run this:"),"\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">cat</span> /media/pi/CPLAYBTBOOT/INFO_UF2.TXT\nUF2 Bootloader <span class="token number">0.2</span>.9 lib/nrfx <span class="token punctuation">(</span>v1.1.0-1-g096e770<span class="token punctuation">)</span> lib/tinyusb <span class="token punctuation">(</span>legacy-755-g55874813<span class="token punctuation">)</span> s140 <span class="token number">6.1</span>.1\nModel: Adafruit Feather nRF52840 Express\nBoard-ID: nRF52840-Feather-revD\nBootloader: s140 <span class="token number">6.1</span>.1\nDate: Feb <span class="token number">22</span> <span class="token number">2019</span></code></pre></div>'}}),"\n",r.createElement(a.p,null,"Note the UF2 bootloader is before version 0.4.0 which is the minimum version required to\nuse the .uf2 files to install CircuitPython. So let’s update it."),"\n",r.createElement(a.h3,{id:"updating-the-bootloader",style:{position:"relative"}},r.createElement(a.a,{href:"#updating-the-bootloader","aria-label":"updating the bootloader permalink",className:"anchor before"},r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Updating the Bootloader"),"\n",r.createElement(a.p,null,r.createElement(a.em,null,"Please note that this step is not required if the bootloader is 0.4.0 or more recent! (see above)")),"\n",r.createElement(a.p,null,"Find the latest bootloader .zip release ",r.createElement(a.a,{href:"https://github.com/adafruit/Adafruit_nRF52_Bootloader/releases"},"here")," and download for the latest version, specifically a file named:\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">circuitplayground_nrf52840_bootloader-0.8.2_s140_6.1.1.zip</code>'}})," (or the latest version)."),"\n",r.createElement(a.p,null,"To flash this to the device use ",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">adafruit-nrfutil</code>'}}),". You can install this via ",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">pip3 install --user adafruit-nrfutil</code>'}}),"."),"\n",r.createElement(a.p,null,"From there, you can update the firmware with the updated bootloader:"),"\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adafruit-nrfutil <span class="token parameter variable">--verbose</span> dfu serial <span class="token parameter variable">--package</span> /home/pi/Downloads/circuitplayground_nrf52840_bootloader-0.8.3_s140_6.1.1.zip <span class="token punctuation">\\</span>\n  <span class="token parameter variable">-p</span> /dev/ttyACM0 <span class="token parameter variable">-b</span> <span class="token number">115200</span> <span class="token parameter variable">--singlebank</span> <span class="token parameter variable">--touch</span> <span class="token number">1200</span></code></pre></div>'}}),"\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Touched serial port /dev/ttyACM0\nOpened serial port /dev/ttyACM0\nStarting DFU upgrade of type 3, SoftDevice size: 151016, bootloader size: 39000, application size: 0\nSending DFU start packet\nSending DFU init packet\nSending firmware file\n########################################\nActivating new firmware\n\nDFU upgrade took 20.90584897994995s\nDevice programmed.</code></pre></div>'}}),"\n",r.createElement(a.p,null,"The 10 neopixels should show green and the CPLAYBTBOOT volume should be back."),"\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">cat</span> /media/pi/CPLAYBTBOOT/INFO_UF2.TXT\nUF2 Bootloader <span class="token number">0.8</span>.3 lib/nrfx <span class="token punctuation">(</span>v2.0.0<span class="token punctuation">)</span> lib/tinyusb <span class="token punctuation">(</span><span class="token number">0.12</span>.0-145-g9775e7691<span class="token punctuation">)</span> lib/uf2 <span class="token punctuation">(</span>remotes/origin/configupdate-9-gadbb8c7<span class="token punctuation">)</span></code></pre></div>'}}),"\n",r.createElement(a.h3,{id:"installing-circuitpython-on-the-device",style:{position:"relative"}},r.createElement(a.a,{href:"#installing-circuitpython-on-the-device","aria-label":"installing circuitpython on the device permalink",className:"anchor before"},r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Installing CircuitPython on the Device"),"\n",r.createElement(a.p,null,"Now let’s download the circuitpython UF2 file from the ",r.createElement(a.a,{href:"https://circuitpython.org/board/circuitplayground_bluefruit/"},"CircuitPython Download Site for BlueFruit"),"."),"\n",r.createElement(a.p,null,"You can drag OR copy to the volume as shown below:"),"\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">cp</span> adafruit-circuitpython-circuitplayground_bluefruit-en_US-8.2.9.uf2 /media/pi/CPLAYBTBOOT/</code></pre></div>'}}),"\n",r.createElement(a.p,null,"All 10 neopixels should go red and the red LED will pulse slightly."),"\n",r.createElement(a.p,null,"You should now see a ",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">CIRCUITPY</code>'}})," drive, meaning we have CircuitPython installed! Last thing we need to do it install the python libraries.\nThese live here in circuitpython:"),"\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">ls</span> /media/pi/CIRCUITPY/lib\n<span class="token punctuation">(</span>no output<span class="token operator">!</span><span class="token punctuation">)</span></code></pre></div>'}}),"\n",r.createElement(a.p,null,"To install libraries, we’ll use an adafruit tool called ",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">circup</code>'}})," which operates similar to python’s pip, except for CircuitPython:"),"\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ pip3 <span class="token function">install</span> <span class="token parameter variable">--user</span> circup</code></pre></div>'}}),"\n",r.createElement(a.p,null,"Let’s download the list of required libraries from ",r.createElement(a.a,{href:"https://github.com/morganstanley/makerspace/blob/main/code/Level%202%20-%20Intro%20to%20Programming/circup_libs_robotics.txt"},"here"),"."),"\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ circup install -r ~/Downloads/circup_libs_robotics_02_08_24.txt\nFound device at /media/pi/CIRCUITPY, running CircuitPython 8.2.9.\nSearching for dependencies for: ['adafruit_ble', 'adafruit_bluefruit_connect', 'adafruit_bus_device', 'adafruit_circuitplayground', 'adafruit_crickit', 'adafruit_gizmo', 'adafruit_hid', 'adafruit_lis3dh', 'adafruit_motor', 'adafruit_pixelbuf', 'adafruit_seesaw', 'adafruit_thermistor', 'found device at /media/pi/circuitpy, running circuitpython 8.2.9.', 'neopixel']\nWARNING:\n\tfound device at /media/pi/circuitpy, running circuitpython 8.2.9. is not a known CircuitPython library.\nWARNING:\n\ttyping-extensions is not a known CircuitPython library.\nWARNING:\n\ttyping-extensions is not a known CircuitPython library.\nReady to install: ['adafruit_ble', 'adafruit_bluefruit_connect', 'adafruit_bus_device', 'adafruit_circuitplayground', 'adafruit_crickit', 'adafruit_gizmo', 'adafruit_hid', 'adafruit_il0373', 'adafruit_lis3dh', 'adafruit_motor', 'adafruit_pixelbuf', 'adafruit_seesaw', 'adafruit_ssd1681', 'adafruit_st7789', 'adafruit_thermistor', 'neopixel']\n\nInstalled 'adafruit_ble'.\nInstalled 'adafruit_bluefruit_connect'.\nInstalled 'adafruit_bus_device'.\nInstalled 'adafruit_circuitplayground'.\nInstalled 'adafruit_crickit'.\nInstalled 'adafruit_gizmo'.\nInstalled 'adafruit_hid'.\nInstalled 'adafruit_il0373'.\nInstalled 'adafruit_lis3dh'.\nInstalled 'adafruit_motor'.\nInstalled 'adafruit_pixelbuf'.\nInstalled 'adafruit_seesaw'.\nInstalled 'adafruit_ssd1681'.\nInstalled 'adafruit_st7789'.\nInstalled 'adafruit_thermistor'.\nInstalled 'neopixel'.</code></pre></div>"}}),"\n",r.createElement(a.p,null,"Now let’s check out that directory:"),"\n",r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">ls</span> /media/pi/CIRCUITPY/lib\nadafruit_ble               adafruit_crickit.mpy       adafruit_lis3dh.mpy        adafruit_ssd1681.mpy\nadafruit_bluefruit_connect adafruit_gizmo             adafruit_motor             adafruit_st7789.mpy\nadafruit_bus_device        adafruit_hid               adafruit_pixelbuf.mpy      adafruit_thermistor.mpy\nadafruit_circuitplayground adafruit_il0373.mpy        adafruit_seesaw            neopixel.mpy</code></pre></div>'}}),"\n",r.createElement(a.p,null,"Excellent! Our libraries are installed and we’re ready to code. You can follow this flow to install other\nCircuitPython libraries you may need when adding other components to the robot."),"\n",r.createElement(a.h3,{id:"references",style:{position:"relative"}},r.createElement(a.a,{href:"#references","aria-label":"references permalink",className:"anchor before"},r.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"References:"),"\n",r.createElement(a.ul,null,"\n",r.createElement(a.li,null,r.createElement(a.a,{href:"https://learn.adafruit.com/adafruit-circuit-playground-bluefruit/overview"},"https://learn.adafruit.com/adafruit-circuit-playground-bluefruit/overview")),"\n",r.createElement(a.li,null,r.createElement(a.a,{href:"https://learn.adafruit.com/adafruit-circuit-playground-bluefruit/update-bootloader"},"https://learn.adafruit.com/adafruit-circuit-playground-bluefruit/update-bootloader")),"\n",r.createElement(a.li,null,r.createElement(a.a,{href:"https://learn.adafruit.com/circuitpython-nrf52840/bluefruit-le-connect-basics"},"https://learn.adafruit.com/circuitpython-nrf52840/bluefruit-le-connect-basics")),"\n",r.createElement(a.li,null,r.createElement(a.a,{href:"https://github.com/adafruit/circup"},"https://github.com/adafruit/circup")),"\n"))}var i=function(e){void 0===e&&(e={});const{wrapper:a}=Object.assign({},(0,n.RP)(),e.components);return a?r.createElement(a,e,r.createElement(l,e)):l(e)},s=t(2532),o=t(7203),c=t(9975),u=t(8509);const d=e=>{let{children:a,pageContext:t,location:n}=e;const l=t.frontmatter.title,i=t.frontmatter.subtitle?t.frontmatter.subtitle:"",u=(0,s.c)(t.frontmatter.heroImage);return r.createElement(c.A,{location:n},r.createElement(s.G,{image:u,alt:""}),r.createElement(o.A,{title:l,subtitle:i}),r.createElement("div",{className:"content"},a))};function p(e){return r.createElement(d,e,r.createElement(i,e))}const h=e=>{let{pageContext:a}=e;return r.createElement(u.A,{title:a.frontmatter.title},r.createElement("meta",{name:"description",content:null==a?void 0:a.description}))}}}]);
//# sourceMappingURL=component---src-templates-page-jsx-content-file-path-content-exercises-en-us-circuitpython-setup-bluefruit-mdx-e9212ffb2e962ca21cd2.js.map